# SDD Overnight Automation Configuration
# Copy this to .env.local and customize

# ─────────────────────────────────────────────
# Slack Configuration
# ─────────────────────────────────────────────

# Channel to scan for feature requests
SLACK_FEATURE_CHANNEL="#feature-requests"

# Keywords to search for in Slack (comma-separated)
SLACK_SEARCH_KEYWORDS="feature request,can we add,would be nice,bug,improvement"

# How many days back to search
SLACK_LOOKBACK_DAYS=7

# Channel to post completion reports (optional)
SLACK_REPORT_CHANNEL="#dev-updates"

# ─────────────────────────────────────────────
# Jira Configuration
# ─────────────────────────────────────────────

# Jira Cloud ID (your-site.atlassian.net or UUID)
JIRA_CLOUD_ID=

# Jira project key (e.g., PROJ, MYAPP)
JIRA_PROJECT_KEY=

# Label that marks issues as ready for auto-implementation
JIRA_AUTO_LABEL=auto-ok

# Issue type to create for new features
JIRA_ISSUE_TYPE=Story

# ─────────────────────────────────────────────
# Integration Options
# ─────────────────────────────────────────────

# Create Jira tickets for Slack requests
CREATE_JIRA_FOR_SLACK=true

# Create Jira tickets for /clone-app features
CREATE_JIRA_FOR_ROADMAP=false

# Keep Jira status in sync with roadmap
SYNC_JIRA_STATUS=true

# Reply to Slack when feature is completed
SLACK_NOTIFY_COMPLETE=true

# ─────────────────────────────────────────────
# Automation Settings
# ─────────────────────────────────────────────

# Maximum features to build per overnight run
MAX_FEATURES=4

# Hours of commits to review for learnings
HOURS_BACK=24

# Create draft PRs automatically (requires gh CLI)
CREATE_PR_ON_COMPLETE=true

# Branch strategy for build scripts (chained|independent|both|sequential)
# - chained: Each feature branches from previous feature (default)
#            Feature #2 has Feature #1's code even if not merged
# - independent: Each feature in a separate git worktree from main (isolated)
# - both: Run chained first, then rebuild each feature independently
#         (sequential, not parallel — runs one after the other)
# - sequential: All features on one branch (build-loop-local only)
BRANCH_STRATEGY=chained

# Spec↔code drift checking after each feature build
# When enabled, a SEPARATE agent reads the spec and source files after the
# build agent commits, comparing them with fresh context ("Layer 2" check).
# The build agent also does a self-check ("Layer 1") as part of /spec-first.
DRIFT_CHECK=true

# How many times to retry auto-fixing drift (default: 1)
# If drift is found, the drift agent updates specs to match code.
# If the fix breaks the build, it retries up to this many times.
MAX_DRIFT_RETRIES=1

# ─────────────────────────────────────────────
# Paths (usually auto-detected)
# ─────────────────────────────────────────────

# Override project directory if needed
# PROJECT_DIR=/path/to/your/project
